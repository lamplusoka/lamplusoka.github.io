# WordPressの動画まとめ2

## 動画1-2
- wpコマンド
    - wordpressをコマンドで操作できる
    - 追加でのインストールが必要
    - kusanagiは標準搭載しているコマンド
        - wp plugin install user-switching --activate
            - ユーザースイッチングプラグインをインストールして有効化する
    - プラグインは「wp\wp-content\plugins」にインストールされる

- Q) 一部だけ（ブログの部分など）wpで管理は可能か？
    - A) ルートディレクトリのサブディレクトリにwpのディレクトリを配置すれば可能
- Q) wpで管理しているサイトのあるサブディレクトリを別のCMSで管理しているサイトで管理可能か？
    - A) 例えばwpの管理画面でshopという固定ページを作る。そして固定ページのshopに相当する場所に「shop」フォルダを作成する
        - shopを含むurlにアクセスすると作ったフォルダが優先され表示される。固定ページは表示されない。
        - Apacheの場合、wp\.htaccessファイルが使われる。「Rewrite」記述で処理している。
            - .htaccessが有効の場合、wpにアクセスするとまずindex.phpを通り、DBを参照してURLとそれに紐づいたidのページを表示してくれる。
            - `RewriteCond %{REQUEST_FILENAME} !-f` URLと同じファイル名があったらRewriteしないでね
            - `RewriteCond %{REQUEST_FILENAME} !-d` URLと同じディレクトリがあったらRewriteしないでね
                - .htaccess内のこの二つの行で、実際にshopを含むurlにアクセスすると作ったフォルダが優先され表示される仕組み。
            - 設定のパーマリンクの設定を「基本」にするとパーマリンク(固定)が使われなくなり、つまり.htaccessが使われなくなる
    - 結論は同居できますよ。同じディレクトリを作られるとwpは優先されないよ。
- WordPress を専用ディレクトリに配置する場合
    - ルートディレクトリ内にwordpressディレクトリを作成する
    - そしてトップページをwpで管理したい場合
        - index.phpをルートディレクトリ直下に移動する。
            - つまりすでにルートディレクトリ直下に別で作ったindex.phpがあるとwoではトップページを管理できないこととなる。
        - index.phpの中身を編集
            - 17行目の`require( dirname( __FILE__ ) . '/wp-blog-header.php' );`のディレクトリを修正するのみ
            - これをやる場合は導入直後にやること。すでにコンテンツがある場合、画像などのパスがずれてしまうため、全ての修正が必要となる。
                - 画像が`wp\wp-content\uploads`に入っており、DBにパスが保存されているため
    - 管理画面のwp-login.phpも一つ下の階層に入ったこととなる。ここにアクセス

## 動画2-1
- 前回のおさらい
    - phpはzend社が作った。そのためエンジンがzendエンジン
    - wpの導入検討されているお客様で進めない場合の状況
        - 大量に静的ページがある
            - ムーバブルパーツで大量のページを作っている場合、そのままのほうがいい
                - 移行が大変、社員教育も大変
            - ディレクトリが複雑になるとコンテンツ管理が大変
        - 市販のCMSに振るなど
        - 大規模なECサイトの場合、ECキューブとかを進める
            - 普通のサイトでサブ的に作る小規模のESサイトはwpのプラグイン(Welcart, etc)でもできる

- PHPについて
    - Webサーバーの設定で、htmlファイルでphpを制御できるが、毎回phpのエンジンが動き動作が遅くなるため推奨されない
    - ショートタグ<?...?>はあまり好ましくない
    - `?>`閉じタグは後ろに何もない場合省略可能
    - wpはfunction.phpがあるよ
    - `<?= `echoの省略形、推奨されていない。動かない環境があるため
