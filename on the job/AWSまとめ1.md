# AWSまとめ
- 闇雲に勉強してもテストの合格は難しい
- 勉強のポイント
    1. AWSのそれぞれのソリューションについて何ができて、何ができないか理解する
    2. AWSのそれぞれのソリューションのエコシステム(関係性的なみたいな！)を理解する
    3. 基本的なITに関する知識を勉強する。
        - 特にネットワーク周りの知識
            - NT、サブネット、VPN、CIDR
        - RAID、SAML、LDAPなど
    4. 少なくとも10数時間以上の自習時間がないと合格は難しい
    5. クイズ感覚で覚えない。問題の解答を考える必要がある

### VPC
- AWSアカウント専用のネットワーク
    - /16から/28のプレフィックス長のCIDRによって作成される
    - 独自のIPアドレス範囲の選択、サブネットの作成、ルートテーブルやネットワークゲートウェイの設定など、仮想ネットワーキングを制御できる
        - サブネットが一つのAZ
        - サブネットは必ず一つのAZの中にしか作れない
            - すなわちサブネットはAZとイコール
        - VPCはサブネットをまたげる
    - サブネット
        - 分離したリソースグループを格納する場所を指定するVPCのIPアドレス範囲
        - /16から/28のプレフィックス長のCIDRによって作成される
        - AWSではCIDRブロック内で最初の4つのIPアドレスと最後のIPアドレスの合計5つが予約されている
        - 指定したサブネット内にAWSリソースを起動できる
        - インターネットゲートウェイにルーティングされるパブリックサブネットとされないプライベートサブネットがある
        - サブネットの範囲が狭いと、オートスケーリングでELBが起動したときにIPが取得できず起動できないことなどがある
        - デフォルトのサブネットがあり、それは最初からインターネットゲートウェイにルーティングされている
            - いわゆるオンプレで普通にサブネットに参加してルーター経由して外に出れる感じで用意されている
        - 新規で作成すると通常はプライベートとなり、自身でIGWをアタッチする必要がある
        - **AWSの各サービスはグローバル、リージョン、AZのどれかに属する**
            - さらに外側にはクラウドフロントというサービスがある

## AWSが提供する基本サービス
- EC2
  - AZのサービス
  - サーバーの追加・削除、マシンスペック変更も数分で可能
  - 管理者権限(root / Administrator) で利用可能
  - LinuxKVMで動いている
  - EC2のシステム基盤 (AWS Nitro System)
      - 独自のハードウェア/Hypervisorにより最適化された性能を提供
  - EC2で選択できるプロセッサとアーキテクチャ
      - Intel Xeon processor
      - AMD EPYC processor
          -  10% コスト低減
      - AWS Graviton Processor
          -  最大 45% コスト低減
  - APIでインフラの自動化が可能

```bash
$ aws ec2 run-instances ¥
--image-id ami-zzzzzz ¥
--instance-count 3 ¥
--region ap-northeast-1 ¥
--instance-type m5.2xlarge
```
  - EC2インスタンスのネーミングポリシー
    - c5d.xlarge
      - c : インスタンスファミリー
        - M5, M5a, T3, A1 : 汎用型
          - TはCPUのバースト機能がある
        - C5, C5n : コンピューティング最適化
        - I3, H1 D2 : ストレージ最適化
        - X1,R5, Z1d : メモリ最適化
        - F1, P3, G3 : 高速コンピューティング(GPU・FPGA)
          - 3Dの処理をしたい時など、HPC(high perfomance PC)はP3を使うなど
      - 5 : インスタンス世代
        - 同じインスタンスファミリーでも世代が進むにつれ数字が大きくなる。世代が新しい方が高性能でコストパフォーマンスも高いため、極力最新世代のインスタンス利用が推奨
      - d : (追加機能)
      - xlarge : インスタンスサイズ
  - 少し特殊なインスタンスタイプ
    - Amazon EC2 Bare Metal
      - AWSの各種サービスとの連携が可能で、AWSクラウドのメリットを失うことなく、OSが直接下層のハードウェアにアクセス可能

- S3
- EBS
- RDS
- ElastCache
- DynamoDB

